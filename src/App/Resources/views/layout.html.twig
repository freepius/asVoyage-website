{%- set currentNav = currentNav|default -%}


<!DOCTYPE html>
<html lang="{{ app.locale }}">
<head>
    <meta charset="utf-8">
    <link rel="icon" type="image/png" href="/favicon.png">

    <title>
        {% block title %}
            anarchos semitas
            {{ currentNav ? ' - ' ~ ('nav.'~currentNav)|trans : '' }}
        {% endblock %}
    </title>


    <!-- Styles
    ================================================== -->

    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/lightbox.css" rel="stylesheet">

    {# DEBUG mode => local files #}
    {% if app.debug %}
        <link href="/vendor/font-awesome/css/font-awesome.css" rel="stylesheet">
    {% else %}
    {# Else => files from CDNs #}
        <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.min.css" rel="stylesheet">
    {% endif %}

    {# Red borders for ADMIN ! #}
    {% if is_granted('ROLE_ADMIN') %}
        <style>
            body {
                padding: 0 15px;
                border: 5px solid #CF5B37;
            }
        </style>
    {% endif %}

    {% block stylesheets %}{% endblock %}
</head>
<body class="container" itemscope itemtype="http://schema.org/
    {{- currentNav == 'about'   ? 'AboutPage'   :
       (currentNav == 'contact' ? 'ContactPage' : 'WebPage') -}}">


    {# Is authenticated ? If yes, allow to logout. #}
    {% if is_granted('IS_AUTHENTICATED_FULLY') %}

        <a href="/admin/logout" class="label label-important"
           style="position: absolute; top: 10px;"
        >
            <i class="icon-off icon-white"></i> {{ 'Logout'|trans }}
        </a>

    {% endif %}


    <!-- Link to back up -->
    <a href="#header" id="back2top">
        <i class="icon-arrow-up icon-white"></i> {{ 'Top'|trans }}
    </a>


    <!-- Header
    ================================================== -->
    {% embed "header.html.twig" %}{% endembed %}


    <!-- Notifications
    ================================================== -->
    <section id="notifications">
    {% block notifications %}
        {% for level in ['success', 'error', 'info', 'warning']
            if app.session.flashbag.has(level)
        %}

            <div class="alert alert-{{ level }}">
                <a class="close" data-dismiss="alert" href="#">Ã—</a>

                {% set messages = app.session.flashbag.get(level) %}

                {% if messages|length > 1 %}
                    <ul>
                        {% for message in messages %}
                            <li>{{ message|raw }}</li>
                        {% endfor %}
                    </ul>
                {% else %}
                    {{ messages[0]|raw }}
                {% endif %}
            </div>

        {% endfor %}
    {% endblock %}
    </section>


    <!-- Main content
    ================================================== -->
    <section id="main" class="row-fluid">
        {% block main %}{% endblock %}
    </section>


    <!-- Javascripts
    ================================================== -->

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    {# DEBUG mode => local files #}
    {% if app.debug %}
        <script src="/vendor/jquery-1.10.2.js"></script>
        <script src="/vendor/bootstrap.min.js"></script>
    {% else %}
    {# Else => files from CDNs #}
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
    {% endif %}

    <script src="/js/modernizr.js"></script>
    <script src="/js/lightbox.js"></script>
    <script src="/js/app.js"></script>

    {% block javascripts %}{% endblock %}
</body>
</html>
